<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>বন্ধু মঙ্গল'৯৭ - ম্যানেজমেন্ট</title>
    <style>
        body { font-family: 'Hind Siliguri', Arial, sans-serif; background-color: #1a2a25; color: #eaf0ed; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; background-color: #243b34; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.4); }
        h1, h2, h3 { text-align: center; color: #81c784; border-bottom: 2px solid #81c784; padding-bottom: 10px; margin-bottom: 20px; }
        button, select, input, textarea { padding: 12px; font-size: 1em; border-radius: 5px; border: 1px solid #4a6b5f; background-color: #1a2a25; color: #eaf0ed; margin-bottom: 10px; }
        button { background-color: #81c784; color: #1a2a25; font-weight: bold; cursor: pointer; border: none; }

        /* --- সব সেকশনের জন্য সাধারণ স্টাইল --- */
        .admin-section { display: none; } /* ডিফল্টভাবে সব সেকশন লুকানো */
        .form-container { background: #2f5247; padding: 20px; border-radius: 8px; margin-top: 20px; }
        .form-container input, .form-container select, .form-container textarea { width: 95%; }
        #form-message { text-align: center; font-weight: bold; margin-top: 15px; height: 20px; }

        /* --- নির্দিষ্ট সেকশনের স্টাইল --- */
        .summary-cards { display: flex; justify-content: space-around; gap: 20px; flex-wrap: wrap; }
        .card { background-color: #2f5247; padding: 20px; border-radius: 8px; text-align: center; flex-grow: 1; min-width: 150px; }
        .card h3 { margin: 0 0 10px 0; color: #a5d6a7; border-bottom: none; }
        .card p { margin: 0; font-size: 1.8em; font-weight: bold; }
        #total-income { color: #66bb6a; } #total-expense { color: #ef5050; } #current-balance { color: #4db6ac; }
        #loader { text-align: center; font-size: 1.2em; padding: 40px; }
        .admin-controls { text-align: center; margin: 30px 0; }
        #admin-status { text-align: center; margin-bottom: 20px; color: #4db6ac; font-weight: bold; display: none; }
        #admin-tabs { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
        #admin-tabs button { background-color: #2f5247; color: #a5d6a7; }
        #admin-tabs button.active { background-color: #81c784; color: #1a2a25; }
        .data-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .data-table th, .data-table td { padding: 10px; text-align: left; border-bottom: 1px solid #4a6b5f; }
        .data-table th { color: #a5d6a7; }
    </style>
</head>
<body>
    <div class="container">
        <div id="public-view">
            <div id="public-report">
                <h1>বন্ধু মঙ্গল'৯৭ - আর্থিক সারসংক্ষেপ</h1>
                <div id="loader">ডেটা লোড হচ্ছে...</div>
                <div class="summary-cards">
                    <div class="card"><h3>সর্বমোট আয়</h3><p id="total-income">৳ ০</p></div>
                    <div class="card"><h3>সর্বমোট ব্যয়</h3><p id="total-expense">৳ ০</p></div>
                    <div class="card"><h3>বর্তমান ব্যালেন্স</h3><p id="current-balance">৳ ০</p></div>
                </div>
            </div>
            <div class="admin-controls"><button id="login-btn" onclick="showLogin()">অ্যাডমিন লগইন</button></div>
        </div>

        <div id="admin-view" style="display:none;">
            <div id="admin-status"></div>
            <div id="admin-tabs">
                <button onclick="showSection('dashboard-section')" class="active">ড্যাশবোর্ড</button>
                <button onclick="showSection('add-transaction-section')">লেনদেন যোগ</button>
                <button onclick="showSection('add-member-section')">সদস্য যোগ</button>
                <button onclick="showSection('member-list-section')">সদস্য তালিকা</button>
            </div>

            <div id="dashboard-section" class="admin-section" style="display: block;">
                <h2>অ্যাডমিন ড্যাশবোর্ড</h2>
                <div id="admin-summary"></div>
            </div>

            <div id="add-transaction-section" class="admin-section">
                <h2>নতুন লেনদেন যোগ করুন</h2>
                <div class="form-container">
                    <form id="transaction-form" onsubmit="handleTransactionSubmit(event)">
                        <input type="date" id="form-date" required>
                        <select id="form-type" required><option value="Income">Income</option><option value="Expense">Expense</option></select>
                        <select id="form-member"><option value="">সদস্য নির্বাচন করুন (ঐচ্ছিক)</option></select>
                        <input type="text" id="form-category" placeholder="খাত (যেমন: সদস্য ফি)" required>
                        <input type="number" id="form-amount" placeholder="টাকার পরিমাণ" required>
                        <textarea id="form-description" placeholder="সংক্ষিপ্ত বিবরণ"></textarea>
                        <button type="submit">সেভ করুন</button>
                    </form>
                    <p id="transaction-form-message"></p>
                </div>
            </div>

            <div id="add-member-section" class="admin-section">
                <h2>নতুন সদস্য যোগ করুন</h2>
                <div class="form-container">
                    <form id="member-form" onsubmit="handleMemberSubmit(event)">
                        <input type="text" id="member-name" placeholder="সদস্যের নাম" required>
                        <input type="text" id="member-father" placeholder="পিতার নাম" required>
                        <textarea id="member-address" placeholder="ঠিকানা" required></textarea>
                        <input type="email" id="member-email" placeholder="ইমেইল আইডি">
                        <input type="tel" id="member-mobile" placeholder="মোবাইল নম্বর" required>
                        <input type="tel" id="member-whatsapp" placeholder="হোয়াটসঅ্যাপ নম্বর">
                        <select id="member-type" required><option value="আজীবন">আজীবন সদস্য</option><option value="সম্মানিত">সম্মানিত সদস্য</option></select>
                        <button type="submit">সদস্য যোগ করুন</button>
                    </form>
                    <p id="member-form-message"></p>
                </div>
            </div>

            <div id="member-list-section" class="admin-section">
                <h2>সকল সদস্যদের তালিকা</h2>
                <table class="data-table">
                    <thead><tr><th>সদস্য আইডি</th><th>নাম</th></tr></thead>
                    <tbody id="member-list-body"></tbody>
                </table>
            </div>

            <div class="admin-controls"><button id="logout-btn" onclick="handleLogout()" style="background-color: #ef5050;">লগ-আউট</button></div>
        </div>
    </div>

    <div id="login-modal" class="modal-bg" style="display:none;">
        </div>

    <script>
        // !! এখানে আপনার নতুন Web App URL এবং পাসওয়ার্ড দিন !!
        const API_URL = 'https://script.google.com/macros/s/AKfycbwWU7Jca63OVStCiTq8kO4sXk8jS1i1MXU1wTAWYSKixtKTz_DJ5VwfKYveS_jqELaC8g/exec';
        const PASSWORD = 'admin123';

        // --- Main App Logic ---
        document.addEventListener('DOMContentLoaded', loadPublicData);

        function loadPublicData() { /* Loads financial summary for everyone */ }
        function loadAdminData() { /* Loads member lists for admin forms */ }
        function showLogin() { /* Shows login modal */ }
        function handleLogin() { /* Handles login and shows admin view */ }
        function handleLogout() { /* Handles logout and shows public view */ }
        function showSection(sectionId) { /* Handles admin panel tabs */ }
        function handleTransactionSubmit(event) { /* Submits new transaction */ }
        function handleMemberSubmit(event) { /* Submits new member */ }

        // --- Function Implementations (Copy the full script below) ---
    </script>
</body>
</html>
