<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>বন্ধু মঙ্গল'৯৭ - অ্যাডমিন প্যানেল</title>
    <style>
        body {
            font-family: 'Hind Siliguri', Arial, sans-serif;
            background-color: #1a2a25;
            color: #eaf0ed;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            width: 100%;
            max-width: 800px;
            background-color: #243b34;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
        }
        /* লগইন সেকশন */
        #login-section {
            text-align: center;
        }
        #login-section h1 {
            color: #81c784;
        }
        #login-section input {
            padding: 12px;
            font-size: 1em;
            width: 80%;
            max-width: 300px;
            border-radius: 5px;
            border: 1px solid #4a6b5f;
            background-color: #1a2a25;
            color: #eaf0ed;
            margin-bottom: 15px;
        }
        #login-section button {
            padding: 12px 30px;
            font-size: 1em;
            border: none;
            border-radius: 5px;
            background-color: #81c784;
            color: #1a2a25;
            font-weight: bold;
            cursor: pointer;
        }
        #error-message {
            color: #ef5350;
            margin-top: 15px;
            height: 20px;
        }

        /* রিপোর্ট সেকশন (লগইনের পর) */
        #report-section {
            display: none; /* ডিফল্টভাবে লুকানো থাকবে */
        }
        h1 {
            text-align: center;
            color: #81c784;
            border-bottom: 2px solid #81c784;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .summary-cards {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .card {
            background-color: #2f5247;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            flex-grow: 1;
            min-width: 150px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        .card h3 { margin: 0 0 10px 0; font-size: 1.1em; color: #a5d6a7; }
        .card p { margin: 0; font-size: 1.8em; font-weight: bold; }
        #total-income { color: #66bb6a; }
        #total-expense { color: #ef5350; }
        #current-balance { color: #4db6ac; }
        #loader { text-align: center; font-size: 1.2em; padding: 40px; }
        .admin-actions { text-align: center; margin-top: 30px; }
        .admin-actions a {
            padding: 12px 30px;
            font-size: 1em;
            text-decoration: none;
            border-radius: 5px;
            background-color: #4db6ac;
            color: #eaf0ed;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="login-section">
            <h1>অ্যাডমিন লগইন</h1>
            <input type="password" id="password" placeholder="পাসওয়ার্ড দিন">
            <br>
            <button onclick="handleLogin()">প্রবেশ করুন</button>
            <p id="error-message"></p>
        </div>

        <div id="report-section">
            <h1>বন্ধু মঙ্গল'৯৭ - আর্থিক সারসংক্ষেপ</h1>
            <div id="loader">ডেটা লোড হচ্ছে...</div>
            <div class="summary-cards">
                <div class="card">
                    <h3>সর্বমোট আয়</h3>
                    <p id="total-income">৳ ০</p>
                </div>
                <div class="card">
                    <h3>সর্বমোট ব্যয়</h3>
                    <p id="total-expense">৳ ০</p>
                </div>
                <div class="card">
                    <h3>বর্তমান ব্যালেন্স</h3>
                    <p id="current-balance">৳ ০</p>
                </div>
            </div>
            <div class="admin-actions">
                <a href="আপনার গুগল শিটের লিঙ্ক এখানে দিন" target="_blank">নতুন ডেটা যোগ করুন</a>
            </div>
        </div>
    </div>

    <script>
        // --- সকল স্ক্রিপ্ট এখানে ---
        
        // !! এখানে আপনার App Script URL টি পেস্ট করুন !!
        const API_URL = 'আপনার Apps Script থেকে পাওয়া Web App URL টি এখানে পেস্ট করুন';
        
        // !! আপনার গুগল শিটের লিঙ্ক এখানে দিন (যাতে সহজে যেতে পারেন) !!
        const GOOGLE_SHEET_URL = 'আপনার গুগল শিটের লিঙ্ক এখানে দিন';
        
        function handleLogin() {
            // !! এখানে আপনার নিজের পছন্দমতো একটি পাসওয়ার্ড দিন !!
            const correctPassword = "admin123"; 
            const enteredPassword = document.getElementById('password').value;
            
            if (enteredPassword === correctPassword) {
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('report-section').style.display = 'block';
                loadReportData();
            } else {
                document.getElementById('error-message').textContent = 'ভুল পাসওয়ার্ড। আবার চেষ্টা করুন।';
            }
        }

        function loadReportData() {
            fetch(API_URL)
                .then(response => response.json())
                .then(data => {
                    let totalIncome = 0;
                    let totalExpense = 0;

                    if (Array.isArray(data)) {
                        data.forEach(transaction => {
                            if (transaction.type === 'আয়' && !isNaN(transaction.amount)) {
                                totalIncome += parseFloat(transaction.amount);
                            } else if (transaction.type === 'ব্যয়' && !isNaN(transaction.amount)) {
                                totalExpense += parseFloat(transaction.amount);
                            }
                        });
                    }
                    
                    const currentBalance = totalIncome - totalExpense;

                    document.getElementById('total-income').textContent = `৳ ${totalIncome.toLocaleString('bn-BD')}`;
                    document.getElementById('total-expense').textContent = `৳ ${totalExpense.toLocaleString('bn-BD')}`;
                    document.getElementById('current-balance').textContent = `৳ ${currentBalance.toLocaleString('bn-BD')}`;
                    
                    document.getElementById('loader').style.display = 'none';
                    // লিঙ্কটি আপডেট করা হচ্ছে
                    document.querySelector('.admin-actions a').href = GOOGLE_SHEET_URL;
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                    document.getElementById('loader').textContent = 'ডেটা লোড করা যায়নি। অনুগ্রহ করে API URL এবং শিট পারমিশন চেক করুন।';
                });
        }
    </script>

</body>
</html>
